{% load static %}
{% load erp_tags %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>{{ page_title }}</title>
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="{% static 'lib/adminlte-3.0.4/plugins/fontawesome-free/css/all.min.css' %}">
    <!-- overlayScrollbars -->
    <link rel="stylesheet"
          href="{% static 'lib/adminlte-3.0.4/plugins/overlayScrollbars/css/OverlayScrollbars.min.css' %}">
    <!-- Theme style -->
    <link rel="stylesheet" href="{% static 'lib/adminlte-3.0.4/dist/css/adminlte.min.css' %}">
    <!-- estilos para datatable   -->
    <link rel="stylesheet" href="{% static 'lib/adminlte-3.0.4/plugins/datatables/css/jquery.dataTables.min.css' %}">

    <link rel="stylesheet"
          href="{% static 'lib/adminlte-3.0.4/plugins/datatables-bs4/css/dataTables.bootstrap4.min.css' %}">
    <link rel="stylesheet"
          href="{% static 'lib/adminlte-3.0.4/plugins/datatables-responsive/css/responsive.bootstrap4.min.css' %}">
    <link rel="stylesheet"
          href="{% static 'lib/adminlte-3.0.4/plugins/datatables-buttons/css/buttons.bootstrap4.min.css' %}">


    <link rel="stylesheet"
          href="{% static 'lib/adminlte-3.0.4/plugins/jquery-confirm/jquery-confirm.min.css' %}">
    <link rel="stylesheet"
          href="{% static 'lib/adminlte-3.0.4/plugins/datatables-bs4/css/dataTables.bootstrap4.min.css' %}">
    <link rel="stylesheet"
          href="{% static 'lib/adminlte-3.0.4/plugins/datatables-responsive/css/responsive.bootstrap4.min.css' %}">
    <link rel="stylesheet"
          href="{% static 'lib/adminlte-3.0.4/plugins/datatables-buttons/css/buttons.bootstrap4.min.css' %}">

    <link rel="stylesheet"
          href="{% static 'lib/adminlte-3.0.4/js/datatable_spanish.json' %}">
    {% block headScripts %}
    <!-- custom head -->
    {% endblock %}

</head>
<body class="hold-transition sidebar-mini text-sm layout-fixed layout-navbar-fixed">
<!-- Site wrapper -->
{% block content %}

{% endblock %}
<!-- ./wrapper -->

<!-- jQuery -->
<script src="{% static 'lib/adminlte-3.0.4/plugins/jquery/jquery.min.js' %}"></script>
<!-- Bootstrap 4 -->
<script src="{% static 'lib/adminlte-3.0.4/plugins/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
<!-- overlayScrollbars -->
<script src="{% static 'lib/adminlte-3.0.4/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js' %}"></script>
<!-- AdminLTE App -->
<script src="{% static 'lib/adminlte-3.0.4/dist/js/adminlte.min.js' %}"></script>
<!-- AdminLTE app  -->
<script src="{% static 'lib/adminlte-3.0.4/dist/js/demo.js' %}"></script>
<!-- jQuery-confirm -->
<link rel="stylesheet" href="{% static 'lib/jquery-confirm-v3.3.4/jquery-confirm.min.css' %}">
<!-- Styles validations -->
<link rel="stylesheet" href="{% static 'css/styles_validation.css' %}">

<script src="{% static 'lib/jquery-confirm-v3.3.4/jquery-confirm.min.js' %}"></script>
<!-- Validation forms -->
<script src="{% static 'js/validations.js' %}"></script>
<!-- Javascript block -->

<!-- libreria creada para alerts personalizados -->
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>


<!-- Toastr messages -->
<link rel="stylesheet" type="text/css" href="{% static 'lib/adminlte-3.0.4/plugins/toastr/toastr.css' %}"
      media="all">
<script type="text/javascript" src="{% static 'lib/adminlte-3.0.4/plugins/toastr/toastr.min.js' %}"></script>
{% if messages %}
{% for message in messages %}
{% if message.tags == 'success' %}
<script type=text/javascript>toastr.
{
    {
        message.tags
    }
}
('{{ message }}')</script>
{% elif message.tags == 'info' %}
<script type=text/javascript>toastr.
{
    {
        message.tags
    }
}
('{{ message }}')</script>
{% elif message.tags == 'warning' %}
<script type=text/javascript>toastr.
{
    {
        message.tags
    }
}
('{{ message }}')</script>
{% elif message.tags == 'error' %}
<script type=text/javascript>toastr.
{
    {
        message.tags
    }
}
('{{ message }}')</script>
{% endif %}
{% endfor %}
{% endif %}

<!-- DataTables  & Plugins -->
<script src="{% static 'lib/adminlte-3.0.4/plugins/datatables/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'lib/adminlte-3.0.4/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js' %}"></script>
<script src="{% static 'lib/adminlte-3.0.4/plugins/datatables-responsive/js/dataTables.responsive.min.js' %}"></script>
<script src="{% static 'lib/adminlte-3.0.4/plugins/datatables-responsive/js/responsive.bootstrap4.min.js' %}"></script>
<script src="{% static 'lib/adminlte-3.0.4/plugins/datatables-buttons/js/dataTables.buttons.min.js' %}"></script>
<script src="{% static 'lib/adminlte-3.0.4/plugins/datatables-buttons/js/buttons.bootstrap4.min.js' %}"></script>
<script src="{% static 'lib/adminlte-3.0.4/plugins/jszip/jszip.min.js' %}"></script>
<script src="{% static 'lib/adminlte-3.0.4/plugins/pdfmake/pdfmake.min.js' %}"></script>
<script src="{% static 'lib/adminlte-3.0.4/plugins/pdfmake/vfs_fonts.js' %}"></script>
<script src="{% static 'lib/adminlte-3.0.4/plugins/datatables-buttons/js/buttons.html5.min.js' %}"></script>
<script src="{% static 'lib/adminlte-3.0.4/plugins/datatables-buttons/js/buttons.print.min.js' %}"></script>
<script src="{% static 'lib/adminlte-3.0.4/plugins/datatables-buttons/js/buttons.colVis.min.js' %}"></script>
<script src="{% static 'json/adminlte.js' %}" type="text/javascript"></script>
<script type="application/javascript">
    $(document).ready(function () {

        table_opts = {
        {
            datatable_opts | js
        }
    }
        ;
        table_opts['language'] = table_es;
        if (table_opts.drawCallback != null) {
            eval("table_opts.drawCallback=" + fn_drawCallback);
        }
        $("#{{ datatable_id }}").DataTable(table_opts);
    });
</script>
<!-- Print method -->
<script src="{% static 'js/util_dev.js' %}"></script>


{% csrf_token %}

<script type="text/javascript">
    //btnDownload_id
    const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;

    //download specific report with pk
    // funciona solo para listas en donde se necesite un reporte con una llave primaria
    // se mostrara en la segunda columna dela fila
    function downloadReport(pk) {
        fields = new FormData();
        fields.append('pk', pk);
        fields.append('PRINT', '');
        /*sendToServer(url = "





        {{ url_list }}", data = fields, method = 'POST', returntype = 2)
            .then(data => {
                fn_generateDownloadPdf(data, "





        {{ page_title }}")
            });*/
        sendToServer(url = "{{ url_list }}", data = fields, method = 'POST', returntype = 3)
            .then(data => {
                name = data.name;
                return data.blob
            }).then(data2 => {
            fn_generateDownloadPdf(data2, name);
        });
    }
</script>

{% block bodyFooterScripts %}
{% endblock %}

</body>